% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/final_analysis.R
\name{final_analysis}
\alias{final_analysis}
\title{Final analysis (inverse normal combination) after an interim with SSR}
\usage{
final_analysis(interim, y_trt2, y_ct2, alloc_rate = 1)
}
\arguments{
\item{interim}{An object of class \code{"interim_analysis"} returned by
\code{interim_analysis()}.}

\item{y_trt2}{Stage-2 treatment data (matrix/data.frame: subjects x endpoints).}

\item{y_ct2}{Stage-2 control data (matrix/data.frame: subjects x endpoints).}

\item{alloc_rate}{Treatment:control allocation (should match interim; default 1).}
}
\value{
An object of class \code{"final_analysis"}.
}
\description{
Takes the output of \code{interim_analysis()} together with stage-2 data
and performs the final combined test using the inverse normal method:
}
\details{
\deqn{ Z_{final} = \sqrt{n1/(n1+n2)} Z_1 + \sqrt{n2/(n1+n2)} Z_2 }

where \eqn{n1/(n1+n2)} is the actual interim timing (information fraction),
\eqn{Z_1} is the interim Z from \code{interim_analysis()}, and \eqn{Z_2}
is the stage-2 Z computed from the stage-2 data.
}
\examples{
\dontrun{
# assume `ia` is the object from interim_analysis(...)
# and we have simulated stage-2 data y_trt2, y_ct2
fa <- final_analysis(
  interim = ia,
  y_trt2 = y_trt2,
  y_ct2  = y_ct2,

)
fa
summary(fa)
}

}
